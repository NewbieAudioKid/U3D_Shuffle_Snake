# Phase 3 设置指南 - 触摸拖拽输入系统

## ✅ 代码已完成

已创建的脚本：

1. **TouchInputManager.cs** - 触摸拖拽输入管理器

---

## 🎮 功能特性

### ✨ 核心功能

- ✅ **屏幕区域分离**：上方 80%控制蛇，下方 20%为扑克区
- ✅ **拖拽方向控制**：从触摸点向任意方向拖动
- ✅ **跨区域拖拽**：首次触摸在蛇区即可，后续可拖到扑克区
- ✅ **8 方向支持**：上下左右 + 4 个斜角
- ✅ **兼容性**：PC 鼠标 + 移动触摸
- ✅ **调试可视化**：显示触摸点、拖拽箭头、区域分界线

---

## 🔧 Unity 中的设置步骤

### 1️⃣ 添加 TouchInputManager 组件

在 Hierarchy 中：

```
1. 选中 Gameboard（或创建新的 InputManager GameObject）
2. Add Component → TouchInputManager
```

### 2️⃣ 配置参数

在 **TouchInputManager** 组件中：

```
屏幕区域设置：
- Poker Zone Height Ratio: 0.2 (扑克区占20%)

输入灵敏度：
- Min Drag Distance: 20 (最小拖拽距离，像素)

调试可视化：
- Show Debug Info: ✓ (勾选，显示调试信息)
```

### 3️⃣ 移除临时键盘输入（可选）

如果之前添加了 `TemporaryKeyboardInput` 组件：

```
1. 在 Hierarchy 中找到该组件所在的 GameObject
2. 在 Inspector 中移除或禁用该组件
   （或者保留，可以同时用键盘和触摸）
```

---

## 📱 操作说明

### PC 测试（鼠标）

1. **点击**屏幕上方区域（蛇区）
2. **按住并拖动**鼠标到任意方向
3. 蛇会朝拖拽方向移动
4. **松开**鼠标，继续保持该方向

### 移动端测试（触摸）

1. **触摸**屏幕上方区域
2. **按住并滑动**手指到任意方向
3. 蛇会朝滑动方向移动
4. **抬起**手指，继续保持该方向

### 操作技巧

- 🎯 **快速转向**：轻轻拖一小段距离即可
- 🎯 **斜角移动**：向斜方向拖动
- 🎯 **不影响扑克区**：即使拖到下方 20%区域，也不会影响扑克牌操作

---

## 🐛 调试信息说明

当 `Show Debug Info` 勾选时，会显示：

### 屏幕上的元素

1. **红色横线**：区域分界线（上方是蛇区，下方是扑克区）
2. **绿色方块**：触摸起点
3. **红色方块**：当前触摸位置
4. **黄色箭头**：拖拽方向和距离

### 文字信息（左上角）

```
触摸中
起点: (x, y)
当前: (x, y)
方向: (x, y)
距离: xxx px
```

---

## ⚙️ 参数调整

### 扑克区域大小

`Poker Zone Height Ratio`

- **0.2** = 下方 20%（默认）
- **0.25** = 下方 25%（扑克区更大）
- **0.15** = 下方 15%（扑克区更小）

### 拖拽灵敏度

`Min Drag Distance`

- **20px** = 中等灵敏度（默认）
- **10px** = 高灵敏度（轻微移动即响应）
- **30px** = 低灵敏度（需要更大的拖拽距离）

---

## 🎯 测试清单

运行游戏，测试以下功能：

- [ ] 在上方区域拖拽，蛇改变方向 ✓
- [ ] 在下方区域拖拽，蛇不响应 ✓
- [ ] 从上方开始拖到下方，仍然有效 ✓
- [ ] 8 个方向都能正常控制 ✓
- [ ] 调试信息正确显示 ✓
- [ ] 红色分界线位置正确 ✓

---

## 📝 下一步

测试通过后：

1. **关闭调试信息**：

   - 取消勾选 `Show Debug Info`
   - 调试元素会消失，不影响游戏画面

2. **调整参数**：

   - 根据实际手感调整 `Min Drag Distance`
   - 根据 UI 布局调整 `Poker Zone Height Ratio`

3. **准备进入 Phase 5**：
   - 扑克牌管理和组合识别系统

---

## 💡 提示

### 为什么使用"首次触摸点判断区域"？

- 玩家可以在蛇区开始拖拽，然后拖到扑克区
- 这样即使手指滑出蛇区，也不会中断控制
- 符合移动端操作习惯

### PC 和移动端都能用吗？

- 是的！代码同时支持鼠标和触摸
- 在 Unity 编辑器中用鼠标测试
- 在手机上自动切换为触摸输入

---

完成测试后告诉我结果，我们继续进行剩余的功能开发！🎮
